<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To Do List Yethey!</title>
  <link rel="stylesheet" href="login&register.css">

</head>
    <body>
        <div class="super">
            <div class="form-box">
                <div class="button-box">
                    <div id="btn"></div>
                    <button type="button" class="toggle-btn" onclick="login()">Log In</button>
                    <button type="button" class="toggle-btn" onclick="register()">Register</button>
                </div>
                
                <form role="form" onsubmit="loginFunction(event)" id="login" class="input-group" autocomplete="off">
                    <input type="text" name="lusername" class="input-field" placeholder="Username" id="lusername" required>
                    <input type="password" name="lpwd" class="input-field" placeholder="Password" id="lpwd" required>
                    <input type="checkbox" class="chech-box"><span>Remember Password</span> 
                    <button type="submit" id="loginBtn" class="submit-btn">Login</button>
                </form>

                <!--<form role="form" onsubmit="registerFunction(event)" id="register" class="input-group" autocomplete="off">-->
                    <form role="form" id="register" class="input-group" autocomplete="off">
                    <input type="text" name="username" class="input-field" placeholder="Username" id="username" required>
                    <input type="email" name="email" class="input-field" placeholder="Email" id="email" required>
                    <input type="password" name="pwd" class="input-field" placeholder="Password" id="pwd" required>
                    <input type="checkbox" class="chech-box"><span>I agree to the terms & conditions</span>
                    <button type="submit" id="registerBtn" class="submit-btn">Register</button>
                </form>

            </div>
        </div>

        <script src="login&register.js"></script>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js";
            import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js";
            import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
        
            // Firebase Configurations
            const firebaseConfig = {
            apiKey: "AIzaSyCAhrqyYLt1Xf-EXCAA-rkAROpB8h9PJvg",
            authDomain: "task-it-aa92b.firebaseapp.com",
            databaseURL:
              "https://task-it-aa92b-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "task-it-aa92b",
            storageBucket: "task-it-aa92b.appspot.com",
            messagingSenderId: "704129947151",
            appId: "1:704129947151:web:65be9515384b4b0462357a",
            measurementId: "G-231G5FKB49",
          };
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            const auth = getAuth();
    
            registerBtn.addEventListener('click',(e) => {
    
                var username = getElementById('username').value;
                var email = getElementById('email').value;
                var password = getElementById('pwd').value;
    
                createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
    
                    set(ref(database, 'users/' + user.uid),{
                        username: username,
                        email: email
                    })
                    alert('user created!');
                    // ...
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
    
                    alert(errorMessage);
                    // ..
                });
            });
    
          </script>
    
    </body>
</html>